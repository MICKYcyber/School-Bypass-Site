<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Minecraft Hosting</title>
  <script src="/socket.io/socket.io.js"></script>
  <style>
    /* Your CSS styles here */
  </style>
</head>
<body>
  <div class="chat-container">
    <!-- Tab navigation -->
    <div class="tabs">
      <div class="tab active" data-tab="chat1">Chat Room 1</div>
      <div class="tab" data-tab="chat2">Chat Room 2</div>
      <div class="tab" data-tab="chat3">Chat Room 3</div>
      <div class="tab" data-tab="chat4">Chat Room 4</div>
      <div class="tab" data-tab="chat5">Chat Room 5</div>
      <div class="tab" data-tab="server">Minecraft Server Hosting</div>
    </div>

    <!-- Chat rooms -->
    <div id="chat1" class="chat active"></div>
    <div id="chat2" class="chat"></div>
    <div id="chat3" class="chat"></div>
    <div id="chat4" class="chat"></div>
    <div id="chat5" class="chat"></div>

    <!-- Server hosting -->
    <div id="server" class="server">
      <input type="text" id="joinCode" placeholder="Join Code" maxlength="5">
    </div>

    <!-- Message input -->
    <input type="text" id="messageInput" placeholder="Type a message (50 chars max)" maxlength="50">
    <button onclick="sendMessage()">Send</button>
  </div>

  <script>
    const socket = io();
    const tabs = document.querySelectorAll('.tab');
    const chats = document.querySelectorAll('.chat, .server');
    const chatInput = document.getElementById('messageInput');
    let activeTab = 'chat1';

    // Switch tabs
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');

        chats.forEach(c => c.classList.remove('active'));
        const tabId = tab.getAttribute('data-tab');
        document.getElementById(tabId).classList.add('active');
        activeTab = tabId;

        // Adjust input visibility for server tab
        chatInput.style.display = activeTab === 'server' ? 'none' : 'block';
      });
    });

    // Listen for messages
    socket.on('allMessages', (messages) => {
      if (activeTab.startsWith('chat')) {
        const chatDiv = document.getElementById(activeTab);
        chatDiv.innerHTML = '';
        messages.forEach(msg => {
          const div = document.createElement('div');
          div.className = 'message-card';
          div.textContent = msg.name;
          chatDiv.appendChild(div);
        });
        chatDiv.scrollTop = chatDiv.scrollHeight;
      }
    });

    // Send message
    function sendMessage() {
      if (activeTab === 'server') return; // Don't send messages in server tab

      const name = chatInput.value.trim();
      if (name) {
        socket.emit('newMessage', { name, room: activeTab });
        chatInput.value = '';
      }
    }
  </script>
</body>
</html>
